<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#34495e">
  <title>Vue的内容分发slot的使用 | 林晖的个人博客</title>
  <link rel="alternate" href="path/of/rss" type="application/atom+xml">
  <link rel="shortcut icon" type="image/ico" href="/favicon.ico">
  <link rel="stylesheet" href="/linhui.github.io/css/style.css">
  

  

  

  

</head>

<body>
  <div class="mobile-header">
    <span><i class="iconfont icon-turnon" id="mobile-nav-toggle"></i></span>
    <div class="mobile-logo">
      <a href="/linhui.github.io/.">Ztopic</a>
    </div>
  </div>
  <div class="page" id="mobile-nav-panel">
    <div class="container">
      <header class="site-nav">
      <div class="nav-content">
        <div class="logo">
          <a href="/linhui.github.io/">Ztopic</a>
        </div>
        <nav class="navbar">
          <ul>
            
              <li class="menu-item">
                <a href="/linhui.github.io/" class="menu-item-link"><i class="iconfont icon-home"></i>首页</a>
              </li>
            
              <li class="menu-item">
                <a href="/linhui.github.io/archives" class="menu-item-link"><i class="iconfont icon-archive"></i>归档</a>
              </li>
            
              <li class="menu-item">
                <a href="/linhui.github.io/about" class="menu-item-link"><i class="iconfont icon-about"></i>关于</a>
              </li>
            
          </ul>
        </nav>
      </div>
</header>

      <div class="banner">
  <div class="show">
    <!-- <img src="/linhui.github.io/" alt="banner"> -->
    <div class="banner-title">
      
        <div class="post-title">
          Vue的内容分发slot的使用
            <div class="post-tags">
    		    
    	      </div>
        </div>
      
    </div>
  </div>
</div>

      <main class="main"id="main">
          <article class="post">
  

  <header>
    <div class="post-title mobile-post-title">
      <h1>Vue的内容分发slot的使用</h1>
        <div class="post-tags">
        
        </div>
    </div>
    <div class="post-meta">
      <span class="post-time"><i class="iconfont icon-calendar"></i>2018-04-14</span>
      
      <!----------------------------------->
        
      <!----------------------------------->
    </div>
  </header>
  
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么是内容分发？"><span class="toc-text">什么是内容分发？?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#场景：在使用组件时，我们常常需要像这样组合使用"><span class="toc-text">场景：在使用组件时，我们常常需要像这样组合使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#所以为了让组件可以很好的组合使用，我们需要一种方式来混合父组件的内容与子组件自己的模板。这个过程被称为内容分发，也就是将父组件的内容放到子组件的指定位置。"><span class="toc-text">所以为了让组件可以很好的组合使用，我们需要一种方式来混合父组件的内容与子组件自己的模板。这个过程被称为内容分发，也就是将父组件的内容放到子组件的指定位置。</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#单个插槽"><span class="toc-text">单个插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#场景：-当在父组件模版中使用子组件时，父组件的内容将会被丢弃，如下子组件child-component："><span class="toc-text">场景： 当在父组件模版中使用子组件时，父组件的内容将会被丢弃，如下子组件child-component：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#具名插槽"><span class="toc-text">具名插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#作用域插槽"><span class="toc-text">作用域插槽</span></a></li></ol>
    </div>
  </div>


  <div class="post-content">
    <h3 id="什么是内容分发？"><a href="#什么是内容分发？" class="headerlink" title="什么是内容分发？?"></a>什么是内容分发？?</h3><p>概括：将父组件的内容放到子组件指定的位置</p>
<h4 id="场景：在使用组件时，我们常常需要像这样组合使用"><a href="#场景：在使用组件时，我们常常需要像这样组合使用" class="headerlink" title="场景：在使用组件时，我们常常需要像这样组合使用"></a>场景：在使用组件时，我们常常需要像这样组合使用</h4><pre><code>
< app>
  < app-header>< /app-header>
  < app-footer>< /app-footer>
< /app>
</code></pre>

<p>此时有两个点需要注意：</p>
<ul>
<li><p>&lt; app&gt; 组件不确定自己所接收的数据。这是由使用 &lt; app&gt; 的父组件所决定的。</p>
</li>
<li><p>&lt; app&gt; 作为一个组件使用，可能有自己的模板。 </p>
</li>
</ul>
<h5 id="所以为了让组件可以很好的组合使用，我们需要一种方式来混合父组件的内容与子组件自己的模板。这个过程被称为内容分发，也就是将父组件的内容放到子组件的指定位置。"><a href="#所以为了让组件可以很好的组合使用，我们需要一种方式来混合父组件的内容与子组件自己的模板。这个过程被称为内容分发，也就是将父组件的内容放到子组件的指定位置。" class="headerlink" title="所以为了让组件可以很好的组合使用，我们需要一种方式来混合父组件的内容与子组件自己的模板。这个过程被称为内容分发，也就是将父组件的内容放到子组件的指定位置。"></a>所以为了让组件可以很好的组合使用，我们需要一种方式来混合父组件的内容与子组件自己的模板。这个过程被称为内容分发，也就是将父组件的内容放到子组件的指定位置。</h5><ol>
<li>先了解一下 ‘编译作用域’ 的概念 : 父组件模板的内容在父组件作用域内编译；子组件模板的内容在子组件作用域内编译!例如：</li>
</ol>
<pre><code>
< child-component>
  {{ message }}
< /child-component>
</code></pre>

<p>此时的message应该绑定的是父组件的数据还是子组件的数据？答案是父组件，这就是编译作用域。再看一个很容易犯错误的例子：</p>
<pre><code>
//childProperty是子组件中的属性，此时的代码不会如我们预期生效。父组件模版不能取到子组件中的状态
< child-component v-show="childProperty">< /child-component>
</code></pre>

<p>根据编译作用域，此时正确的做法应该是在子组件模版中进行操作，绑定到相对应的节点中，如下：</p>
<pre><code>
Vue.component('child-component', {
  // 有效，因为是在正确的作用域内
  template: '< div v-show="childProperty">Child',
  data: function () {
    return {
      childProperty: true
    }
  }
})
</code></pre>

<h3 id="单个插槽"><a href="#单个插槽" class="headerlink" title="单个插槽"></a>单个插槽</h3><h4 id="场景：-当在父组件模版中使用子组件时，父组件的内容将会被丢弃，如下子组件child-component："><a href="#场景：-当在父组件模版中使用子组件时，父组件的内容将会被丢弃，如下子组件child-component：" class="headerlink" title="场景： 当在父组件模版中使用子组件时，父组件的内容将会被丢弃，如下子组件child-component："></a>场景： 当在父组件模版中使用子组件时，父组件的内容将会被丢弃，如下子组件child-component：</h4><pre><code>
< div>
  < h2>我是子组件的标题< /h2>
< /div>
</code></pre>

<p>父组件模板:</p>
<pre><code>
< div>
  < h1>我是父组件的标题< /h1>
  < child-component>
    < p>这是一些初始内容< /p>
    < p>这是更多的初始内容< /p>
  < /child-component>
< /div>
</code></pre>

<p>此时的渲染结果为：</p>
<pre><code>
< div>
  < h1>我是父组件的标题
  < div>
    < h2>我是子组件的标题< /h2>
  < /div>

</code></pre>

<p>此时父组件里面的内容就会被替换，此时的解决方法是可以使用slot单个插槽，例如在上面的子组件child-component中:</p>
<pre><code>
< div>
  < h2>我是子组件的标题< /h2>
  < slot>
   在没有要分发的内容时才会显示。
  < /solt>
< /div>
</code></pre>

<p>此时的渲染结果就是 ：</p>
<pre><code>
< div>
  < h1>我是父组件的标题
  < div>
    < h2>我是子组件的标题< /h2>
     < p>这是一些初始内容< /p>
    < p>这是更多的初始内容< /p>
  < /div>

</code></pre>

<p>此时的父组件的内容不会被丢弃。子组件模板只有一个没有属性的插槽时，父组件传入的整个内容片段将插入到插槽所在的 DOM 位置，并替换掉插槽标签本身。<br>最初在 <slot> 标签中的任何内容都被视为备用内容。备用内容在子组件的作用域内编译，并且只有在宿主元素为空，且没有要插入的内容时才显示备用内容。</slot></p>
<h3 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h3><p><slot> 元素可以用一个特殊的特性 name 来进一步配置如何分发内容。多个插槽可以有不同的名字。具名插槽将匹配内容片段中有对应 slot 特性的元素。仍然可以有一个匿名插槽，它是默认插槽，作为找不到匹配的内容片段的备用插槽。如果没有默认插槽，这些找不到匹配的内容片段将被抛弃。如下一个child-layout：</slot></p>
<pre><code>
< div class="container">
  < header>
    < slot name="header">
  < /header>
  < main>
    < slot>< /slot>
  < /main>
  < footer>
    < slot name="footer">
  < /footer>
< /div>
</code></pre>

<p>父组件模板</p>
<pre><code>
< child-layout>
  < h1 slot="header">页面标题< /h1>
  < p>主要内容< /p>
  < p slot="footer">一些信息< /p>
< /child-layout>
</code></pre>

<p>此时的渲染结果为：</p>
<pre><code>
< div class="container">
  < header>
    < h1>页面标题< /h1>
  < /header>
  < main>
    < p>主要内容。< /p>
  < /main>
  < footer>
    < p>一些信息< /p>
  < /footer>

</code></pre>

<p>由于使用了具名插槽，也就是使用了slot的name属性，使得父组件的内容被插到了子组件的指定位置。由于在子组件的main中使用了匿名slot,所以在父组件的模版中的p标签也没有用name属性，所以就行默认配对，如果此时没有匿名slot那么p标签的内容将会被抛弃。</p>
<h3 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h3><p>作用域插槽是一种特殊类型的插槽，用作一个 (能被传递数据的) 可重用模板，来代替已经渲染好的元素。在子组件中，只需将数据传递到插槽，就像你将 prop 传递给组件一样,例如在子组件中：</p>
<pre><code>
< div class="child">
  < slot data="data from child">< /slot>
< /div>
</code></pre>

<p>此时在父组件模版中，必须要有&lt; template &gt;元素存在，并且要使用特殊属性slot-scope，以此表示它是作用域插槽的模板。slot-scope 的值将被用作一个临时变量名，此变量接收从子组件传递过来的 prop 对象，比如现在有父组件：</p>
<pre><code>
< div class="parent">
  < child>
    < template slot-scope="props">
      < span>data from parent< /span>
      < span>{{ props.data }}< /span>
    < /template>
  < /child>
< /div>
</code></pre>

<p>此时渲染的结果是：</p>
<pre><code>
< div class="parent">
  < div class="child">
    < span>data from parent< /span>
    < span>data from child< /span>
  < /div>
< /div>
</code></pre>
  </div>
  <div class="post-footer">the end</div>
</article>

          
  <nav class="pagination post-nav">
    
      <a href="/linhui.github.io/Vue-js可复用性/">
        <span class="prev-post"><i class="iconfont icon-back"></i>Vue.js可复用性</span>
      </a>
    
    
      <a href="/linhui.github.io/vue组件间的通信/">
        <span class="next-post">vue组件间的通信<i class="iconfont icon-more"></i></span>
      </a>
    
  </nav>


          
  


      </main>
    </div>
    <footer>
      <div class="social-links">
        
          
            <a href="https://www.zhihu.com/"><i class="iconfont icon-zhihu"></i></a>
          
        
          
            <a href="https://weibo.com"><i class="iconfont icon-weibo"></i></a>
          
        
          
            <a href="https://github.com/"><i class="iconfont icon-github"></i></a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
      
        <div class="quote">
          <p>Love all, trust a few, do wrong to none.——William Shakespeare</p>
        </div>
      
      <div class="copyright">
        <p>
          由 <a href="https://hexo.io/">Hexo</a> 强力驱动
          <span>|</span>
          主题 - <a href="https://github.com/wa-ri/hexo-theme-ztopic">ztopic</a
        </p>
        <p>
          <span>
          
          &copy;
          
            2018
          
          </span>
          <i class="iconfont icon-circle"></i>
          <span>林晖</span>
        </p>
      </div>
</footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <div id="mobile-nav">
  <nav id="mobile-nav-menu">
    
      <a href="/linhui.github.io/" class="mobile-nav-link"><i class="iconfont icon-home"></i>首页</a>
    
      <a href="/linhui.github.io/archives" class="mobile-nav-link"><i class="iconfont icon-archive"></i>归档</a>
    
      <a href="/linhui.github.io/about" class="mobile-nav-link"><i class="iconfont icon-about"></i>关于</a>
    
    <div class="mobile-intro"><i class="iconfont icon-pen"></i>practice makes perfect</div>
  </nav>
</div>


  <script src="/linhui.github.io/libs/jQuery/jquery-3.2.1.min.js"></script>
  <script src="/linhui.github.io/libs/slideout/slideout.min.js"></script>
  
    <link rel="stylesheet" href="/linhui.github.io/libs/fancybox/jquery.fancybox.css">
    <script src="/linhui.github.io/libs/fancybox/jquery.fancybox.pack.js"></script>
  
  

  <script src="/linhui.github.io/js/ztopic.js"></script>
</body>
</html>
