<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Vue的内容分发slot的使用 | 林晖的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="什么是内容分发？?概括：将父组件的内容放到子组件指定的位置 场景：在使用组件时，我们常常需要像这样组合使用 &amp;lt; app&amp;gt;   &amp;lt; app-header&amp;gt;&amp;lt; /app-header&amp;gt;   &amp;lt; app-footer&amp;gt;&amp;lt; /app-footer&amp;gt; &amp;lt; /app&amp;gt;   此时有两个点需要注意：  &amp;lt; app&amp;gt; 组件不确定自己所接收的数据。这是由使用 &amp;lt; app&amp;gt; 的父组件所决定的。">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue的内容分发slot的使用">
<meta property="og:url" content="https://itlinnnn.github.io/linhui.github.io/2018/04/14/Vue的内容分发slot的使用/index.html">
<meta property="og:site_name" content="林晖的个人博客">
<meta property="og:description" content="什么是内容分发？?概括：将父组件的内容放到子组件指定的位置 场景：在使用组件时，我们常常需要像这样组合使用 &amp;lt; app&amp;gt;   &amp;lt; app-header&amp;gt;&amp;lt; /app-header&amp;gt;   &amp;lt; app-footer&amp;gt;&amp;lt; /app-footer&amp;gt; &amp;lt; /app&amp;gt;   此时有两个点需要注意：  &amp;lt; app&amp;gt; 组件不确定自己所接收的数据。这是由使用 &amp;lt; app&amp;gt; 的父组件所决定的。">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-04-14T16:44:39.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Vue的内容分发slot的使用">
<meta name="twitter:description" content="什么是内容分发？?概括：将父组件的内容放到子组件指定的位置 场景：在使用组件时，我们常常需要像这样组合使用 &amp;lt; app&amp;gt;   &amp;lt; app-header&amp;gt;&amp;lt; /app-header&amp;gt;   &amp;lt; app-footer&amp;gt;&amp;lt; /app-footer&amp;gt; &amp;lt; /app&amp;gt;   此时有两个点需要注意：  &amp;lt; app&amp;gt; 组件不确定自己所接收的数据。这是由使用 &amp;lt; app&amp;gt; 的父组件所决定的。">
  
    <link rel="alternate" href="/linhui.github.io/atom.xml" title="林晖的个人博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/linhui.github.io/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/linhui.github.io/" id="logo">林晖的个人博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/linhui.github.io/">主页</a>
        
          <a class="main-nav-link" href="/linhui.github.io/archives">博客</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/linhui.github.io/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://itlinnnn.github.io/linhui.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Vue的内容分发slot的使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/linhui.github.io/2018/04/14/Vue的内容分发slot的使用/" class="article-date">
  <time datetime="2018-04-14T15:48:31.000Z" itemprop="datePublished">2018-04-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Vue的内容分发slot的使用
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="什么是内容分发？"><a href="#什么是内容分发？" class="headerlink" title="什么是内容分发？?"></a>什么是内容分发？?</h3><p>概括：将父组件的内容放到子组件指定的位置</p>
<h4 id="场景：在使用组件时，我们常常需要像这样组合使用"><a href="#场景：在使用组件时，我们常常需要像这样组合使用" class="headerlink" title="场景：在使用组件时，我们常常需要像这样组合使用"></a>场景：在使用组件时，我们常常需要像这样组合使用</h4><pre><code>
< app>
  < app-header>< /app-header>
  < app-footer>< /app-footer>
< /app>
</code></pre>

<p>此时有两个点需要注意：</p>
<ul>
<li><p>&lt; app&gt; 组件不确定自己所接收的数据。这是由使用 &lt; app&gt; 的父组件所决定的。</p>
</li>
<li><p>&lt; app&gt; 作为一个组件使用，可能有自己的模板。 </p>
</li>
</ul>
<h5 id="所以为了让组件可以很好的组合使用，我们需要一种方式来混合父组件的内容与子组件自己的模板。这个过程被称为内容分发，也就是将父组件的内容放到子组件的指定位置。"><a href="#所以为了让组件可以很好的组合使用，我们需要一种方式来混合父组件的内容与子组件自己的模板。这个过程被称为内容分发，也就是将父组件的内容放到子组件的指定位置。" class="headerlink" title="所以为了让组件可以很好的组合使用，我们需要一种方式来混合父组件的内容与子组件自己的模板。这个过程被称为内容分发，也就是将父组件的内容放到子组件的指定位置。"></a>所以为了让组件可以很好的组合使用，我们需要一种方式来混合父组件的内容与子组件自己的模板。这个过程被称为内容分发，也就是将父组件的内容放到子组件的指定位置。</h5><ol>
<li>先了解一下 ‘编译作用域’ 的概念 : 父组件模板的内容在父组件作用域内编译；子组件模板的内容在子组件作用域内编译!例如：</li>
</ol>
<pre><code>
< child-component>
  {{ message }}
< /child-component>
</code></pre>

<p>此时的message应该绑定的是父组件的数据还是子组件的数据？答案是父组件，这就是编译作用域。再看一个很容易犯错误的例子：</p>
<pre><code>
//childProperty是子组件中的属性，此时的代码不会如我们预期生效。父组件模版不能取到子组件中的状态
< child-component v-show="childProperty">< /child-component>
</code></pre>

<p>根据编译作用域，此时正确的做法应该是在子组件模版中进行操作，绑定到相对应的节点中，如下：</p>
<pre><code>
Vue.component('child-component', {
  // 有效，因为是在正确的作用域内
  template: '< div v-show="childProperty">Child',
  data: function () {
    return {
      childProperty: true
    }
  }
})
</code></pre>

<h3 id="单个插槽"><a href="#单个插槽" class="headerlink" title="单个插槽"></a>单个插槽</h3><h4 id="场景：-当在父组件模版中使用子组件时，父组件的内容将会被丢弃，如下子组件child-component："><a href="#场景：-当在父组件模版中使用子组件时，父组件的内容将会被丢弃，如下子组件child-component：" class="headerlink" title="场景： 当在父组件模版中使用子组件时，父组件的内容将会被丢弃，如下子组件child-component："></a>场景： 当在父组件模版中使用子组件时，父组件的内容将会被丢弃，如下子组件child-component：</h4><pre><code>
< div>
  < h2>我是子组件的标题< /h2>
< /div>
</code></pre>

<p>父组件模板:</p>
<pre><code>
< div>
  < h1>我是父组件的标题< /h1>
  < child-component>
    < p>这是一些初始内容< /p>
    < p>这是更多的初始内容< /p>
  < /child-component>
< /div>
</code></pre>

<p>此时的渲染结果为：</p>
<pre><code>
< div>
  < h1>我是父组件的标题
  < div>
    < h2>我是子组件的标题< /h2>
  < /div>

</code></pre>

<p>此时父组件里面的内容就会被替换，此时的解决方法是可以使用slot单个插槽，例如在上面的子组件child-component中:</p>
<pre><code>
< div>
  < h2>我是子组件的标题< /h2>
  < slot>
   在没有要分发的内容时才会显示。
  < /solt>
< /div>
</code></pre>

<p>此时的渲染结果就是 ：</p>
<pre><code>
< div>
  < h1>我是父组件的标题
  < div>
    < h2>我是子组件的标题< /h2>
     < p>这是一些初始内容< /p>
    < p>这是更多的初始内容< /p>
  < /div>

</code></pre>

<p>此时的父组件的内容不会被丢弃。子组件模板只有一个没有属性的插槽时，父组件传入的整个内容片段将插入到插槽所在的 DOM 位置，并替换掉插槽标签本身。<br>最初在 <slot> 标签中的任何内容都被视为备用内容。备用内容在子组件的作用域内编译，并且只有在宿主元素为空，且没有要插入的内容时才显示备用内容。</slot></p>
<h3 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h3><p><slot> 元素可以用一个特殊的特性 name 来进一步配置如何分发内容。多个插槽可以有不同的名字。具名插槽将匹配内容片段中有对应 slot 特性的元素。仍然可以有一个匿名插槽，它是默认插槽，作为找不到匹配的内容片段的备用插槽。如果没有默认插槽，这些找不到匹配的内容片段将被抛弃。如下一个child-layout：</slot></p>
<pre><code>
< div class="container">
  < header>
    < slot name="header">
  < /header>
  < main>
    < slot>< /slot>
  < /main>
  < footer>
    < slot name="footer">
  < /footer>
< /div>
</code></pre>

<p>父组件模板</p>
<pre><code>
< child-layout>
  < h1 slot="header">页面标题< /h1>
  < p>主要内容< /p>
  < p slot="footer">一些信息< /p>
< /child-layout>
</code></pre>

<p>此时的渲染结果为：</p>
<pre><code>
< div class="container">
  < header>
    < h1>页面标题< /h1>
  < /header>
  < main>
    < p>主要内容。< /p>
  < /main>
  < footer>
    < p>一些信息< /p>
  < /footer>

</code></pre>

<p>由于使用了具名插槽，也就是使用了slot的name属性，使得父组件的内容被插到了子组件的指定位置。由于在子组件的main中使用了匿名slot,所以在父组件的模版中的p标签也没有用name属性，所以就行默认配对，如果此时没有匿名slot那么p标签的内容将会被抛弃。</p>
<h3 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h3><p>作用域插槽是一种特殊类型的插槽，用作一个 (能被传递数据的) 可重用模板，来代替已经渲染好的元素。在子组件中，只需将数据传递到插槽，就像你将 prop 传递给组件一样,例如在子组件中：</p>
<pre><code>
< div class="child">
  < slot data="data from child">< /slot>
< /div>
</code></pre>

<p>此时在父组件模版中，必须要有&lt; template &gt;元素存在，并且要使用特殊属性slot-scope，以此表示它是作用域插槽的模板。slot-scope 的值将被用作一个临时变量名，此变量接收从子组件传递过来的 prop 对象，比如现在有父组件：</p>
<pre><code>
< div class="parent">
  < child>
    < template slot-scope="props">
      < span>data from parent< /span>
      < span>{{ props.data }}< /span>
    < /template>
  < /child>
< /div>
</code></pre>

<p>此时渲染的结果是：</p>
<pre><code>
< div class="parent">
  < div class="child">
    < span>data from parent< /span>
    < span>data from child< /span>
  < /div>
< /div>
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://itlinnnn.github.io/linhui.github.io/2018/04/14/Vue的内容分发slot的使用/" data-id="cjfzklkum0000vixeq6lj0bs4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/linhui.github.io/2018/04/14/Vue-js可复用性/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Vue.js可复用性
        
      </div>
    </a>
  
  
    <a href="/linhui.github.io/2018/04/07/vue组件间的通信/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">vue组件间的通信</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">全部</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/linhui.github.io/archives/2018/04/">April 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/linhui.github.io/2018/04/14/Vue-js可复用性/">Vue.js可复用性</a>
          </li>
        
          <li>
            <a href="/linhui.github.io/2018/04/14/Vue的内容分发slot的使用/">Vue的内容分发slot的使用</a>
          </li>
        
          <li>
            <a href="/linhui.github.io/2018/04/07/vue组件间的通信/">vue组件间的通信</a>
          </li>
        
          <li>
            <a href="/linhui.github.io/2018/04/07/Vue的组件的概念与基本使用/">Vue的组件的概念与基本使用</a>
          </li>
        
          <li>
            <a href="/linhui.github.io/2018/04/07/时间、时间戳、带格式时间的转换/">时间、时间戳、带格式时间的转换</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 林晖<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/linhui.github.io/" class="mobile-nav-link">主页</a>
  
    <a href="/linhui.github.io/archives" class="mobile-nav-link">博客</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/linhui.github.io/fancybox/jquery.fancybox.css">
  <script src="/linhui.github.io/fancybox/jquery.fancybox.pack.js"></script>


<script src="/linhui.github.io/js/script.js"></script>



  </div>
</body>
</html>