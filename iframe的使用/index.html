<!DOCTYPE html><html class="theme-next pisces use-motion"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/linhui.github.io/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/linhui.github.io/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/linhui.github.io/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/linhui.github.io/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/linhui.github.io/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/linhui.github.io/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/linhui.github.io/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="Hexo, NexT"><link rel="alternate" href="/linhui.github.io/atom.xml" title="林晖的个人博客" type="application/atom+xml"><meta name="description" content="开始接触前端的时候，搜索iframe出来的是iframe耗能，不安全等，以至于并没有去正式了解，想来也确实是太不够严谨。现在在业务中有需要用到iframe来实现一些特定的需求，所以觉得很有必要去了解一下，查了一些资料进行整理。  概念： iframe 元素会创建包含另外一个文档的内联框架（即行内框架）,用于设置文本或图形的浮动图文框或容器基本使用：12&amp;lt;!--这个是最通常的使用，还可以设置"><meta property="og:type" content="article"><meta property="og:title" content="iframe的使用"><meta property="og:url" content="https://itlinnnn.github.io/linhui.github.io/iframe的使用/index.html"><meta property="og:site_name" content="林晖的个人博客"><meta property="og:description" content="开始接触前端的时候，搜索iframe出来的是iframe耗能，不安全等，以至于并没有去正式了解，想来也确实是太不够严谨。现在在业务中有需要用到iframe来实现一些特定的需求，所以觉得很有必要去了解一下，查了一些资料进行整理。  概念： iframe 元素会创建包含另外一个文档的内联框架（即行内框架）,用于设置文本或图形的浮动图文框或容器基本使用：12&amp;lt;!--这个是最通常的使用，还可以设置"><meta property="og:locale" content="default"><meta property="og:updated_time" content="2018-11-25T03:27:00.434Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="iframe的使用"><meta name="twitter:description" content="开始接触前端的时候，搜索iframe出来的是iframe耗能，不安全等，以至于并没有去正式了解，想来也确实是太不够严谨。现在在业务中有需要用到iframe来实现一些特定的需求，所以觉得很有必要去了解一下，查了一些资料进行整理。  概念： iframe 元素会创建包含另外一个文档的内联框架（即行内框架）,用于设置文本或图形的浮动图文框或容器基本使用：12&amp;lt;!--这个是最通常的使用，还可以设置"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/linhui.github.io/",scheme:"Pisces",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"Author"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://itlinnnn.github.io/linhui.github.io/iframe的使用/"><title>iframe的使用 | 林晖的个人博客</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="default"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/linhui.github.io/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">林晖的个人博客</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/linhui.github.io/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-archives"><a href="/linhui.github.io/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://itlinnnn.github.io/linhui.github.io/linhui.github.io/iframe的使用/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="林晖"><meta itemprop="description" content=""><meta itemprop="image" content="/linhui.github.io/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="林晖的个人博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">iframe的使用</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-25T11:26:42+08:00">2018-11-25</time></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>开始接触前端的时候，搜索iframe出来的是iframe耗能，不安全等，以至于并没有去正式了解，想来也确实是太不够严谨。现在在业务中有需要用到iframe来实现一些特定的需求，所以觉得很有必要去了解一下，查了一些资料进行整理。</p></blockquote><h4 id="概念：-iframe-元素会创建包含另外一个文档的内联框架（即行内框架）-用于设置文本或图形的浮动图文框或容器"><a href="#概念：-iframe-元素会创建包含另外一个文档的内联框架（即行内框架）-用于设置文本或图形的浮动图文框或容器" class="headerlink" title="概念： iframe 元素会创建包含另外一个文档的内联框架（即行内框架）,用于设置文本或图形的浮动图文框或容器"></a>概念： iframe 元素会创建包含另外一个文档的内联框架（即行内框架）,用于设置文本或图形的浮动图文框或容器</h4><h4 id="基本使用："><a href="#基本使用：" class="headerlink" title="基本使用："></a>基本使用：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--这个是最通常的使用，还可以设置很多的属性值的--&gt;</span><br><span class="line">&lt;iframe src=<span class="string">"http://m.haimati.cn"</span>&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure><blockquote><p>常用属性，会在下文中做一些介绍</p><ul><li>frameborder:是否显示边框，1(yes),0(no)</li><li>height:框架作为一个普通元素的高度，建议在使用css设置。</li><li>width:框架作为一个普通元素的宽度，建议使用css设置。</li><li>name:框架的名称，window.frames[name]时专用的属性。</li><li>scrolling:框架的是否滚动。yes,no,auto。</li><li>src：内框架的地址，可以使页面地址，也可以是图片的地址。</li><li>srcdoc , 用来替代原来HTML body里面的内容。但是IE不支持。</li><li>sandbox: 对iframe进行一些列限制，IE10+支持</li></ul></blockquote><h4 id="基本的特性：-能自由操作iframe和父框架的内容-DOM-（前提条件是同域，如果跨域顶多只能实现页面跳转）"><a href="#基本的特性：-能自由操作iframe和父框架的内容-DOM-（前提条件是同域，如果跨域顶多只能实现页面跳转）" class="headerlink" title="基本的特性： 能自由操作iframe和父框架的内容(DOM). （前提条件是同域，如果跨域顶多只能实现页面跳转）"></a>基本的特性： 能自由操作iframe和父框架的内容(DOM). （前提条件是同域，如果跨域顶多只能实现页面跳转）</h4><blockquote><p>那什么是同域/ 什么是跨域呢?</p></blockquote><p>就是判断你的url首部是否一样，例如：<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A:&lt;iframe id="mainIframe" name="mainIframe" src="/main.html" frameborder="0" scrolling="auto" &gt;&lt;/iframe&gt;</span><br><span class="line"></span><br><span class="line">B:&lt;iframe id="mainIframe" name="mainIframe" src="http://www.baidu.com" frameborder="0" scrolling="auto" &gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure><p></p><p>使用A时，因为同域，父页面可以对子页面进行改写,反之亦然。<br>使用B时，不同域，父页面没有权限改动子页面,但可以实现页面的跳转<br>这里，我们先从简单的开始，当主页面和iframe同域时，我们可以做些什么。<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">"iframe1"</span>);</span><br><span class="line"><span class="keyword">var</span> iwindow = iframe.contentWindow;</span><br><span class="line"><span class="keyword">var</span> idoc = iwindow.document;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"window"</span>,iwindow);<span class="comment">//获取iframe的window对象</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"document"</span>,idoc);  <span class="comment">//获取iframe的document</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"html"</span>,idoc.documentElement);<span class="comment">//获取iframe的html</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"head"</span>,idoc.head);  <span class="comment">//获取head</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"body"</span>,idoc.body);  <span class="comment">//获取body</span></span><br></pre></td></tr></table></figure><p></p><blockquote><p>另外一种简单的方法是根据name来获取<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> &lt;iframe src =&quot;/index.html&quot; id=&quot;ifr1&quot; name=&quot;ifr1&quot; scrolling=&quot;yes&quot;&gt;</span><br><span class="line">  &lt;p&gt;Your browser does not support iframes.&lt;/p&gt;</span><br><span class="line">&lt;/iframe&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    console.log(window.frames[&apos;ifr1&apos;].window);</span><br><span class="line">console.dir(document.getElementById(&quot;ifr1&quot;).contentWindow);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p></p></blockquote><h3 id="在iframe中获取父级内容"><a href="#在iframe中获取父级内容" class="headerlink" title="在iframe中获取父级内容"></a>在iframe中获取父级内容</h3><blockquote><p>同理，在同域下，父页面可以获取子iframe的内容，那么子iframe同样也能操作父页面内容。在iframe中，可以通过在window上挂载的几个API进行获取. 获取了之后，我们就可以进行相关操作了。</p></blockquote><h3 id="iframe的轮询"><a href="#iframe的轮询" class="headerlink" title="iframe的轮询"></a>iframe的轮询</h3><p>话说在很久很久以前，我们实现异步发送请求是使用iframe实现的~!<br>那时候为了不跳转页面，提交表单时是使用iframe提交的。现在，前端发展很快，websocket,SSE,ajax等的出现，颠覆了iframe, 现在基本上只能活在IE8,9的浏览器内了。</p><h4 id="iframe长轮询"><a href="#iframe长轮询" class="headerlink" title="iframe长轮询"></a>iframe长轮询</h4><blockquote><p>如果写过ajax的童鞋，应该知道，长轮询就是在ajax的readyState = 4的时，再次执行原函数即可。 这里使用iframe也是一样，异步创建iframe，然后reload, 和后台协商好, 看后台哥哥们将返回的信息放在,然后获取里面信息即可. 这里是直接放在body里.</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> iframeCon = docuemnt.querySelector(<span class="string">'#container'</span>),</span><br><span class="line">       text; <span class="comment">//传递的信息</span></span><br><span class="line">   <span class="keyword">var</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">'iframe'</span>),</span><br><span class="line">       iframe.id = <span class="string">"frame"</span>,</span><br><span class="line">       iframe.style = <span class="string">"display:none;"</span>,</span><br><span class="line">       iframe.name=<span class="string">"polling"</span>,</span><br><span class="line">       iframe.src=<span class="string">"target.html"</span>;</span><br><span class="line">   iframeCon.appendChild(iframe);</span><br><span class="line">   iframe.onload= <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="keyword">var</span> iloc = iframe.contentWindow.location,</span><br><span class="line">           idoc  = iframe.contentDocument;</span><br><span class="line">       setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">           text = idoc.getElementsByTagName(<span class="string">'body'</span>)[<span class="number">0</span>].textContent;</span><br><span class="line">           <span class="built_in">console</span>.log(text);</span><br><span class="line">           iloc.reload(); <span class="comment">//刷新页面,再次获取信息，并且会触发onload函数</span></span><br><span class="line">       &#125;,<span class="number">2000</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>还有一些应用还有待去结合业务场景敲实例，未完待续···</p></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/linhui.github.io/svg动画/" rel="next" title="svg动画"><i class="fa fa-chevron-left"></i> svg动画</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">Overview</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">林晖</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/linhui.github.io/archives/"><span class="site-state-item-count">14</span> <span class="site-state-item-name">posts</span></a></div></nav><div class="feed-link motion-element"><a href="/linhui.github.io/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#概念：-iframe-元素会创建包含另外一个文档的内联框架（即行内框架）-用于设置文本或图形的浮动图文框或容器"><span class="nav-number">1.</span> <span class="nav-text">概念： iframe 元素会创建包含另外一个文档的内联框架（即行内框架）,用于设置文本或图形的浮动图文框或容器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基本使用："><span class="nav-number">2.</span> <span class="nav-text">基本使用：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基本的特性：-能自由操作iframe和父框架的内容-DOM-（前提条件是同域，如果跨域顶多只能实现页面跳转）"><span class="nav-number">3.</span> <span class="nav-text">基本的特性： 能自由操作iframe和父框架的内容(DOM). （前提条件是同域，如果跨域顶多只能实现页面跳转）</span></a></li></ol><li class="nav-item nav-level-3"><a class="nav-link" href="#在iframe中获取父级内容"><span class="nav-number"></span> <span class="nav-text">在iframe中获取父级内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iframe的轮询"><span class="nav-number"></span> <span class="nav-text">iframe的轮询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#iframe长轮询"><span class="nav-number">1.</span> <span class="nav-text">iframe长轮询</span></a></li></ol></li></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">林晖</span></div><div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div><span class="post-meta-divider">|</span><div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/linhui.github.io/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/linhui.github.io/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/linhui.github.io/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/linhui.github.io/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/linhui.github.io/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/linhui.github.io/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/linhui.github.io/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/linhui.github.io/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/linhui.github.io/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/linhui.github.io/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/linhui.github.io/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/linhui.github.io/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/linhui.github.io/js/src/bootstrap.js?v=5.1.4"></script></body></html>