<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#34495e">
  <title>Vue.js可复用性 | 林晖的个人博客</title>
  <link rel="alternate" href="path/of/rss" type="application/atom+xml">
  <link rel="shortcut icon" type="image/ico" href="/favicon.ico">
  <link rel="stylesheet" href="/linhui.github.io/css/style.css">
  

  

  

  

</head>

<body>
  <div class="mobile-header">
    <span><i class="iconfont icon-turnon" id="mobile-nav-toggle"></i></span>
    <div class="mobile-logo">
      <a href="/linhui.github.io/.">Ztopic</a>
    </div>
  </div>
  <div class="page" id="mobile-nav-panel">
    <div class="container">
      <header class="site-nav">
      <div class="nav-content">
        <div class="logo">
          <a href="/linhui.github.io/">Ztopic</a>
        </div>
        <nav class="navbar">
          <ul>
            
              <li class="menu-item">
                <a href="/linhui.github.io/" class="menu-item-link"><i class="iconfont icon-home"></i>首页</a>
              </li>
            
              <li class="menu-item">
                <a href="/linhui.github.io/archives" class="menu-item-link"><i class="iconfont icon-archive"></i>归档</a>
              </li>
            
              <li class="menu-item">
                <a href="/linhui.github.io/about" class="menu-item-link"><i class="iconfont icon-about"></i>关于</a>
              </li>
            
          </ul>
        </nav>
      </div>
</header>

      <div class="banner">
  <div class="show">
    <!-- <img src="/linhui.github.io/" alt="banner"> -->
    <div class="banner-title">
      
        <div class="post-title">
          Vue.js可复用性
            <div class="post-tags">
    		    
    	      </div>
        </div>
      
    </div>
  </div>
</div>

      <main class="main"id="main">
          <article class="post">
  

  <header>
    <div class="post-title mobile-post-title">
      <h1>Vue.js可复用性</h1>
        <div class="post-tags">
        
        </div>
    </div>
    <div class="post-meta">
      <span class="post-time"><i class="iconfont icon-calendar"></i>2018-04-14</span>
      
      <!----------------------------------->
        
      <!----------------------------------->
    </div>
  </header>
  
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#混入（mixins）"><span class="toc-text">混入（mixins）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#组件和混入对象含有同名选项时"><span class="toc-text">组件和混入对象含有同名选项时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#混入对象与组件具有同名钩子函数时"><span class="toc-text">混入对象与组件具有同名钩子函数时</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#值为对象的选项时，例如：methods，components等的时候"><span class="toc-text">值为对象的选项时，例如：methods，components等的时候</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#全局混入"><span class="toc-text">全局混入</span></a></li></ol></li></ol></li></ol>
    </div>
  </div>


  <div class="post-content">
    <h2 id="混入（mixins）"><a href="#混入（mixins）" class="headerlink" title="混入（mixins）"></a>混入（mixins）</h2><p>在实际的应用中，有很多的业务代码是可以重复使用的，vue.js本身是一个注重于高效率的框架，所以也提供了组件中的复用功能。混入 (mixins) 是一种分发 Vue组件中可复用功能的非常灵活的方式。混入对象可以包含任意组件选项。当组件使用混入对象时，所有混入对象的选项将被混入该组件本身的选项。如下：</p>
<pre><code>
// 定义一个混入对象
var mixinTest = {
  created: function () {
    this.mixinMethod()
  },
  methods: {
    mixinMethod: function () {
      console.log('mixinMethod from mixin!')
    }
  }
}

// 定义一个使用混入对象的组件
var Component = Vue.extend({
  mixins: [mixinMethod]
})

var component = new Component() // => "hello from mixin!"
</code></pre>

<h3 id="组件和混入对象含有同名选项时"><a href="#组件和混入对象含有同名选项时" class="headerlink" title="组件和混入对象含有同名选项时"></a>组件和混入对象含有同名选项时</h3><p> 从中可以发现当组件混入对象时，对象的方法以及钩子都被混入了该组件的本身。这种方式是很灵活的。那要是组件和混入对象含有同名选项时，也是有规则的，比如，当数据上和组件有同名时，以组件的数据为先。</p>
<pre><code>
var mixin = {
  data: function () {
    return {
      testA: 'aaaa',
      testB: 'bbbb'
    }
  }
}

new Vue({
  mixins: [mixin],
  data: function () {
    return {
      testA: 'AAAA',
      testC: 'CCCC'
    }
  },
  created: function () {
    console.log(this.$data)
    // => { testA: "AAAA", testB: "bbbb", testC: "CCCC" }
  }
})
</code></pre>

<p>mixins对象里的testA和testB混入到了组件中的data中，同时出现了testA与组件同名，所以优先保留了组件的数据。</p>
<h3 id="混入对象与组件具有同名钩子函数时"><a href="#混入对象与组件具有同名钩子函数时" class="headerlink" title="混入对象与组件具有同名钩子函数时"></a>混入对象与组件具有同名钩子函数时</h3><pre><code>
var mixin = {
  created: function () {
    console.log('混入对象的钩子')
  }
}

new Vue({
  mixins: [mixin],
  created: function () {
    console.log('组件的钩子')
  }
})

// => "混入对象的钩子"
// => "组件的钩子"
</code></pre>

<p>可以发现混入对象的钩子和组件的钩子都会执行，但是会先执行混入对象的钩子</p>
<h4 id="值为对象的选项时，例如：methods，components等的时候"><a href="#值为对象的选项时，例如：methods，components等的时候" class="headerlink" title="值为对象的选项时，例如：methods，components等的时候"></a>值为对象的选项时，例如：methods，components等的时候</h4><pre><code>
var mixin = {
  methods: {
    mixinsMethod: function () {
      console.log('mixinsMethod')
    },
    sameMethod: function () {
      console.log('from mixin')
    }
  }
}

var vm = new Vue({
  mixins: [mixin],
  methods: {
    selfMethod: function () {
      console.log('selfMethod')
    },
    sameMethod: function () {
      console.log('from self')
    }
  }
})

vm.mixinsMethod() // => "mixinsMethod"
vm.selfMethod() // => "selfMethod"
vm.sameMethod() // => "from self"
</code></pre>

<p>由上可得，在值为对象的混入对象混入时，这些将和组件原有的选项混合一起成为一个对象，当对象的键名与组件的键名出现重复时，会使用组件的键名。</p>
<h4 id="全局混入"><a href="#全局混入" class="headerlink" title="全局混入"></a>全局混入</h4><p>以上列举的都是单独的引入到某一个组件中使用。也可以全局注册混入对象。这样的话所有的实例就都会被混入的对象所作用。也可以根据自己需要做成一个具体的使用工具类。供全局所有的实例使用。不过也要小心使用，毕竟会影响到所有的组件，需要结合实际场景使用。</p>
<pre><code>
Vue.mixin({
  created: function () {
    var option = this.$options.text
    if (option) {
      console.log(option)
    }
  }
})
new Vue({
  text: 'globalMixins!'
})
// => "globalMixins!"
</code></pre>

  </div>
  <div class="post-footer">the end</div>
</article>

          
  <nav class="pagination post-nav">
    
      <a href="/linhui.github.io/Vue的渲染函数/">
        <span class="prev-post"><i class="iconfont icon-back"></i>Vue的渲染函数</span>
      </a>
    
    
      <a href="/linhui.github.io/Vue的内容分发slot的使用/">
        <span class="next-post">Vue的内容分发slot的使用<i class="iconfont icon-more"></i></span>
      </a>
    
  </nav>


          
  


      </main>
    </div>
    <footer>
      <div class="social-links">
        
          
            <a href="https://www.zhihu.com/"><i class="iconfont icon-zhihu"></i></a>
          
        
          
            <a href="https://weibo.com"><i class="iconfont icon-weibo"></i></a>
          
        
          
            <a href="https://github.com/"><i class="iconfont icon-github"></i></a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
      
        <div class="quote">
          <p>Love all, trust a few, do wrong to none.——William Shakespeare</p>
        </div>
      
      <div class="copyright">
        <p>
          由 <a href="https://hexo.io/">Hexo</a> 强力驱动
          <span>|</span>
          主题 - <a href="https://github.com/wa-ri/hexo-theme-ztopic">ztopic</a
        </p>
        <p>
          <span>
          
          &copy;
          
            2018
          
          </span>
          <i class="iconfont icon-circle"></i>
          <span>林晖</span>
        </p>
      </div>
</footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <div id="mobile-nav">
  <nav id="mobile-nav-menu">
    
      <a href="/linhui.github.io/" class="mobile-nav-link"><i class="iconfont icon-home"></i>首页</a>
    
      <a href="/linhui.github.io/archives" class="mobile-nav-link"><i class="iconfont icon-archive"></i>归档</a>
    
      <a href="/linhui.github.io/about" class="mobile-nav-link"><i class="iconfont icon-about"></i>关于</a>
    
    <div class="mobile-intro"><i class="iconfont icon-pen"></i>practice makes perfect</div>
  </nav>
</div>


  <script src="/linhui.github.io/libs/jQuery/jquery-3.2.1.min.js"></script>
  <script src="/linhui.github.io/libs/slideout/slideout.min.js"></script>
  
    <link rel="stylesheet" href="/linhui.github.io/libs/fancybox/jquery.fancybox.css">
    <script src="/linhui.github.io/libs/fancybox/jquery.fancybox.pack.js"></script>
  
  

  <script src="/linhui.github.io/js/ztopic.js"></script>
</body>
</html>
